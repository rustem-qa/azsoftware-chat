<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AZSoftware - ƒ∞≈ü√ßi ∆èlaq…ô Sistemi</title>
    <link rel="stylesheet" href="style.css">
    <style>
        
        
    </style>
</head>
<body>
    <div class="login-container">
        <div class="logo">
            <h1>üî∑ Azsoftware</h1>
            <p>Daxili ∆èlaq…ô Platformasƒ±</p>
        </div>
        
        <div class="login-box">
            <h2>Sistem…ô Giri≈ü</h2>
            <form id="loginForm">
                <div class="input-group">
                    <label>ƒ∞≈ü√ßi ID</label>
                    <input type="text" id="userId" placeholder="M…ôs…ôl…ôn: EMP001" required>
                </div>
                
                <div class="input-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="userName" placeholder="Adƒ±nƒ±zƒ± daxil edin" required>
                </div>
                
                <div class="input-group">
                    <label>≈û√∂b…ô</label>
                    <select id="department" required>
                        <option value="">Se√ßin...</option>
                        <option value="Quality Assurance">Quality Assurance</option>
                        <option value="Development">Development</option>
                        <option value="Design">Design</option>
                        <option value="Marketing">Marketing</option>
                        <option value="HR">HR</option>
                        <option value="Management">Management</option>
                    </select>
                </div>
                
                <button type="submit" class="btn-primary">Daxil Ol</button>
                <div class="loading" id="loading">Baƒülanƒ±r...</div>
            </form>
            
            <div class="info-box">
                <p>üí° <strong>Qeyd:</strong> B√ºt√ºn m…ôlumatlar Firebase Realtime Database-d…ô saxlanƒ±lƒ±r.</p>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        // üîΩ Sƒ∞Zƒ∞N CONFIG M∆èLUMATLARINIZ - BURAYA YAPI≈ûDIRIN
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, ref, set, onDisconnect, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBUj0C-F0MYDheMMhnvYrLlhovCIjMuNyA",
            authDomain: "azsoftware-chat.firebaseapp.com",
            databaseURL: "https://azsoftware-chat-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "azsoftware-chat",
            storageBucket: "azsoftware-chat.firebasestorage.app",
            messagingSenderId: "195768328928",
            appId: "1:195768328928:web:104fc8883aabf648d5a685"
        };

        // Firebase ba≈ülat
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const userId = document.getElementById('userId').value.trim();
            const userName = document.getElementById('userName').value.trim();
            const department = document.getElementById('department').value;
            
            document.getElementById('loading').style.display = 'block';
            
            const userData = {
                id: userId,
                name: userName,
                department: department,
                status: 'online',
                lastSeen: Date.now()
            };
            
            try {
                // ƒ∞stifad…ô√ßini online et
                const userRef = ref(database, 'users/' + userId);
                await set(userRef, userData);
                
                // Disconnect olduqda offline et
                onDisconnect(userRef).update({ 
                    status: 'offline', 
                    lastSeen: serverTimestamp() 
                });
                
                // LocalStorage-a saxla
                localStorage.setItem('azsoftware_user', JSON.stringify(userData));
                
                window.location.href = 'chat.html';
            } catch (error) {
                alert('X…ôta ba≈ü verdi: ' + error.message);
                document.getElementById('loading').style.display = 'none';
            }
        });
    </script>
</body>
</html>